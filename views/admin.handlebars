<main>
  <div class="nav-bar">
    <h1><img src="public/assets/images/localspot-02.png" id="logo"> LocalSpot</h1>
    <h6><a href="/">Back to LocalSpots</a></h6>
  </div>
  <div class="container">
    <div class="row">

      <div class="col s12 spot-div">
        <div class="row">
          <div class="col s12">
            <h2>Add A LocalSpot</h2>
            <hr>
          </div>
        </div>
        <form id="add-spot add-spot-div" class="col s10 offset-s1">
          <div class="row">
            <div class="input-field col s12">
              <input id="spot_name" placeholder="Name of Spot" required>
              <input id="image" placeholder="Yelp Image URL" required>
              <input id="rating" placeholder="Yelp Rating" type="number" min="1" max="5" required>
              <input id="alias" placeholder="Type of Spot" required>
              <input id="address" placeholder="Address" required>
              <input id="likes" placeholder="Starting Number of LocalSpot Likes" type="number" min="0" max="0" required>
              <br>
              <button id="add-button" class="btn waves-effect waves-light" type="submit" name="action">Add New Spot
                <i class="material-icons right"></i>
              </button>
            </div>
          </div>
      </div>
    </div>
    </form>
  </div>




</main>
<script type="text/javascript">
$(document).ready(function () {
    console.log("hello");





    $(document).on("click", "#add-button", handleSpotFormSubmit);


    function handleSpotFormSubmit(event) {
        event.preventDefault();
        var nameInput = $("#spot_name").val();
        var imageInput = $("#image").val();
        var ratingInput = $("#rating").val();
        var aliasInput = $("#alias").val();
        var addressInput = $("#address").val();
        var likesInput = $("#likes").val();


        // Don't do anything if the name fields hasn't been filled out
        if (!nameInput || !imageInput || !ratingInput || !aliasInput || !addressInput) {
            console.log("hi in statement");
            return;
        }
        // Calling the Insert function and passing in the value of the name input
        insertSpot({
            spot_name: nameInput,
            image: imageInput,
            rating: ratingInput,
            alias: aliasInput,
            address: addressInput,
            likes: likesInput
        });
    }

    function insertSpot(spotData) {
        console.log("Insert Spot");
        $.post("/api/admin312", spotData, function (data) {
            location.reload();
        })
    }

    // app.post("/api/admin312", function (req, res) {
    //     db.Spot.create(req.body).then(function (dbSpot) {
    //         res.json(dbSpot);
    //     });

    // })




});





</script>